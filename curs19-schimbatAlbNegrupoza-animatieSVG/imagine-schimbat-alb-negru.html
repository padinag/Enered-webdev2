<!DOCTYPE html>
<html lang="en">

<head>

    <title>Document</title>
    <script>
        document.addEventListener("DOMContentLoaded", start)
        var canvas;
        var ctx;
        var myImg;
        function start() {
            canvas = document.getElementsByTagName("canvas")[0];
            ctx = canvas.getContext('2d');
            myImg = new Image(500, 500);
            myImg.addEventListener("load", startImg)
            myImg.src = "puppies.jpeg";
            document.body.appendChild(myImg);
        }


        function startImg() {
            ctx.drawImage(myImg, 0, 0);
            var data = ctx.getImageData(0, 0, 500, 500);
            console.log(data);

            var val;
            for (var i = 0; i < data.width * data.height * 4; i += 4){
                val = data.data[i] * 0.3 + data.data[i+1] * 0.59 + data.data[i+2] * 0.11;
                // val = data.data[i] * 0.33 + data.data[i+1] * 0.33 + data.data[i+2] * 0.34;
                // val = data.data[i] * 0 + data.data[i+1] * 0 + data.data[i+2] * 1;
                 data.data[i] = val;
                data.data[i+1] = val;
                data.data[i+2] = val;
            }
            ctx.putImageData(data, 0, 0);
        }




    </script>
</head>

<body>
    <canvas width="500" height="500"></canvas>
</body>

</html>